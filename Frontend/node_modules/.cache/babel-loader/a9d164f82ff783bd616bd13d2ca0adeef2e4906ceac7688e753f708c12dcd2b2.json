{"ast":null,"code":"import _objectSpread from\"C:/Users/divya/Downloads/Movie Booking Frontend/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{useNavigate,Link}from'react-router-dom';import{DefaultlayoutHoc}from'../layout/DefaultLayout';import{bookingAPI,IMG_W500}from'../services/api';import{useAuth}from'../context/AuthContext';import Loader from'../components/Loader/Loader';/* ── Helpers ──────────────────────────────────────────────────────────── */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const loadLocalBookings=user=>{if(!user)return[];try{return JSON.parse(localStorage.getItem(\"bms_bookings_\".concat(user.id||user.email))||'[]');}catch(_unused){return[];}};const fmtDate=dt=>{try{return new Date(dt).toLocaleDateString('en-IN',{day:'numeric',month:'short',year:'numeric',hour:'2-digit',minute:'2-digit'});}catch(_unused2){return dt||'';}};const STATUS_STYLE={CONFIRMED:{bg:'rgba(34,197,94,0.1)',text:'#4ade80',border:'rgba(34,197,94,0.2)'},CANCELLED:{bg:'rgba(239,68,68,0.1)',text:'#f87171',border:'rgba(239,68,68,0.2)'},PENDING:{bg:'rgba(234,179,8,0.1)',text:'#fbbf24',border:'rgba(234,179,8,0.2)'}};const Badge=_ref=>{let{label,bg,color,border}=_ref;return/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-bold px-2.5 py-1 rounded-full\",style:{background:bg,color,border:\"1px solid \".concat(border)},children:label});};/* ── Streaming card ───────────────────────────────────────────────────── */const StreamingCard=_ref2=>{var _b$show;let{b,i}=_ref2;const st=STATUS_STYLE[b.status]||STATUS_STYLE.CONFIRMED;const movie=((_b$show=b.show)===null||_b$show===void 0?void 0:_b$show.movie)||{};const src=movie.posterUrl?movie.posterUrl.startsWith('http')?movie.posterUrl:\"\".concat(IMG_W500).concat(movie.posterUrl):null;return/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-2xl overflow-hidden animate-fade-up\",style:{background:'#14152b',border:'1px solid rgba(255,255,255,0.05)',animationDelay:\"\".concat(i*0.05,\"s\")},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-5 py-3 flex items-center justify-between\",style:{borderBottom:'1px solid rgba(255,255,255,0.05)',background:'rgba(255,255,255,0.02)'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-bold px-2 py-0.5 rounded-full\",style:{background:'rgba(99,102,241,0.15)',color:'#818cf8',border:'1px solid rgba(99,102,241,0.25)'},children:\"STREAMING\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 text-xs font-mono\",children:b.bookingNumber})]}),/*#__PURE__*/_jsx(Badge,{label:b.purchaseType==='RENT'?'Rented · 48hr':'Purchased · Lifetime',bg:b.purchaseType==='RENT'?'rgba(59,130,246,0.1)':'rgba(139,92,246,0.1)',color:b.purchaseType==='RENT'?'#93c5fd':'#c4b5fd',border:b.purchaseType==='RENT'?'rgba(59,130,246,0.2)':'rgba(139,92,246,0.2)'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-5 flex gap-4\",children:[src?/*#__PURE__*/_jsx(\"img\",{src:src,alt:movie.title,className:\"w-14 h-20 rounded-xl object-cover shrink-0\",onError:e=>{e.target.style.display='none';}}):/*#__PURE__*/_jsx(\"div\",{className:\"w-14 h-20 rounded-xl shrink-0 flex items-center justify-center\",style:{background:'rgba(99,102,241,0.12)',border:'1px solid rgba(99,102,241,0.2)'},children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"#818cf8\",strokeWidth:\"1.5\",width:\"22\",height:\"22\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M15 10l4.553-2.069A1 1 0 0121 8.87v6.26a1 1 0 01-1.447.894L15 14M3 8a2 2 0 012-2h10a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2V8z\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-white font-bold text-sm mb-1 truncate\",children:movie.title||'Unknown'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-xs mb-3\",children:[movie.genre,movie.language].filter(Boolean).join(' · ')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 text-xs\",children:fmtDate(b.bookingTime)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-end justify-between shrink-0\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-white font-black text-xl\",children:[\"\\u20B9\",b.totalAmount]}),/*#__PURE__*/_jsx(Badge,{label:b.status,bg:st.bg,color:st.text,border:st.border})]})]})]});};/* ── Theater booking card ─────────────────────────────────────────────── */const TheaterCard=_ref3=>{var _b$show2,_b$show3,_b$show3$screen,_b$show3$screen$theat,_b$show4,_b$show4$screen,_b$show5,_b$seats,_b$seats2,_b$totalAmount;let{b,i,onCancel}=_ref3;const st=STATUS_STYLE[b.status]||STATUS_STYLE.PENDING;const movie=((_b$show2=b.show)===null||_b$show2===void 0?void 0:_b$show2.movie)||{};const src=movie.posterUrl?movie.posterUrl.startsWith('http')?movie.posterUrl:\"\".concat(IMG_W500).concat(movie.posterUrl):null;return/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-2xl overflow-hidden animate-fade-up\",style:{background:'#14152b',border:'1px solid rgba(255,255,255,0.05)',animationDelay:\"\".concat(i*0.05,\"s\")},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-5 py-3 flex items-center justify-between\",style:{borderBottom:'1px solid rgba(255,255,255,0.05)',background:'rgba(255,255,255,0.02)'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-bold px-2 py-0.5 rounded-full\",style:{background:'rgba(229,25,55,0.12)',color:'#fca5a5',border:'1px solid rgba(229,25,55,0.2)'},children:\"THEATER\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 text-xs font-mono truncate max-w-xs\",children:b.bookingNumber})]}),/*#__PURE__*/_jsx(Badge,{label:b.status,bg:st.bg,color:st.text,border:st.border})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-5 flex gap-4\",children:[src&&/*#__PURE__*/_jsx(\"img\",{src:src,alt:movie.title,className:\"w-14 h-20 rounded-xl object-cover shrink-0\",onError:e=>{e.target.style.display='none';}}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-white font-bold text-sm mb-1 truncate\",children:movie.title||'Unknown'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-xs mb-0.5\",children:[(_b$show3=b.show)===null||_b$show3===void 0?void 0:(_b$show3$screen=_b$show3.screen)===null||_b$show3$screen===void 0?void 0:(_b$show3$screen$theat=_b$show3$screen.theater)===null||_b$show3$screen$theat===void 0?void 0:_b$show3$screen$theat.name,(_b$show4=b.show)===null||_b$show4===void 0?void 0:(_b$show4$screen=_b$show4.screen)===null||_b$show4$screen===void 0?void 0:_b$show4$screen.name].filter(Boolean).join(' · ')}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-xs mb-3\",children:fmtDate((_b$show5=b.show)===null||_b$show5===void 0?void 0:_b$show5.startTime)}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-1\",children:[(_b$seats=b.seats)===null||_b$seats===void 0?void 0:_b$seats.slice(0,6).map(s=>{var _s$seat;return/*#__PURE__*/_jsx(\"span\",{className:\"text-xs px-2 py-0.5 rounded-md font-mono\",style:{background:'rgba(255,255,255,0.05)',color:'#6b7280',border:'1px solid rgba(255,255,255,0.07)'},children:(_s$seat=s.seat)===null||_s$seat===void 0?void 0:_s$seat.seatNumber},s.id);}),((_b$seats2=b.seats)===null||_b$seats2===void 0?void 0:_b$seats2.length)>6&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-600\",children:[\"+\",b.seats.length-6]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-end justify-between shrink-0 gap-2\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-white font-black text-xl\",children:[\"\\u20B9\",(_b$totalAmount=b.totalAmount)===null||_b$totalAmount===void 0?void 0:_b$totalAmount.toFixed(0)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-end gap-1.5\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 text-xs\",children:fmtDate(b.bookingTime)}),b.status==='CONFIRMED'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>onCancel(b),className:\"text-xs font-semibold px-3 py-1.5 rounded-lg\",style:{color:'#f87171',background:'rgba(239,68,68,0.08)',border:'1px solid rgba(239,68,68,0.2)'},children:\"Cancel\"})]})]})]})]});};/* ── Main Page ────────────────────────────────────────────────────────── */const BookingsPage=()=>{const{user}=useAuth();const navigate=useNavigate();const[bookings,setBookings]=useState([]);const[loading,setLoading]=useState(true);const[tab,setTab]=useState('all');const[error,setError]=useState('');useEffect(()=>{if(!user){navigate('/');return;}// Load local streaming bookings immediately (instant)\nconst local=loadLocalBookings(user);setBookings(local);// Then fetch theater bookings from backend\nconst fetchAPI=async()=>{try{if(!user.id)throw new Error('no id');const res=await bookingAPI.getByUser(user.id);const api=res.data||[];// Merge: local first (newest), then API (deduplicated)\nconst localNums=new Set(local.map(b=>b.bookingNumber));setBookings([...local,...api.filter(b=>!localNums.has(b.bookingNumber))]);}catch(_unused3){if(!local.length)setError('Backend offline — no theater bookings to show.');}finally{setLoading(false);}};fetchAPI();},[user,navigate]);const handleCancel=async b=>{if(!window.confirm('Cancel this booking?'))return;try{if(b.id&&typeof b.id==='number')await bookingAPI.cancel(b.id);}catch(_unused4){}// Update localStorage for streaming bookings\nconst key=\"bms_bookings_\".concat(user.id||user.email);try{const saved=JSON.parse(localStorage.getItem(key)||'[]');localStorage.setItem(key,JSON.stringify(saved.map(x=>x.bookingNumber===b.bookingNumber?_objectSpread(_objectSpread({},x),{},{status:'CANCELLED'}):x)));}catch(_unused5){}setBookings(p=>p.map(x=>x.bookingNumber===b.bookingNumber?_objectSpread(_objectSpread({},x),{},{status:'CANCELLED'}):x));};const streaming=bookings.filter(b=>b.type==='STREAMING');const theater=bookings.filter(b=>b.type!=='STREAMING');const shown=tab==='all'?bookings:tab==='streaming'?streaming:theater;if(loading&&bookings.length===0)return/*#__PURE__*/_jsx(Loader,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-10 max-w-4xl animate-fade-up\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-1 h-8 rounded-full\",style:{background:'#e51937'}}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-white text-2xl font-black\",children:\"My Bookings\"}),bookings.length>0&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-bold px-2.5 py-1 rounded-full\",style:{background:'rgba(229,25,55,0.12)',color:'#fca5a5',border:'1px solid rgba(229,25,55,0.2)'},children:bookings.length})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-xl px-4 py-3 mb-5 text-sm text-yellow-300 flex gap-2\",style:{background:'rgba(234,179,8,0.08)',border:'1px solid rgba(234,179,8,0.2)'},children:[\"\\u26A0 \",error]}),bookings.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-1.5 p-1 rounded-xl mb-6 w-fit\",style:{background:'rgba(255,255,255,0.04)',border:'1px solid rgba(255,255,255,0.06)'},children:[{key:'all',label:\"All (\".concat(bookings.length,\")\")},{key:'theater',label:\"Theater (\".concat(theater.length,\")\")},{key:'streaming',label:\"Streaming (\".concat(streaming.length,\")\")}].map(t=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTab(t.key),className:\"px-4 py-2 rounded-lg text-xs font-bold transition-all\",style:tab===t.key?{background:'#e51937',color:'#fff',boxShadow:'0 2px 12px rgba(229,25,55,0.35)'}:{color:'#6b7280'},children:t.label},t.key))}),!loading&&shown.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-20 rounded-2xl\",style:{background:'#14152b',border:'1px solid rgba(255,255,255,0.04)'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 rounded-2xl mx-auto mb-4 flex items-center justify-center\",style:{background:'rgba(229,25,55,0.08)',border:'1px solid rgba(229,25,55,0.15)'},children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"#e51937\",strokeWidth:\"1.5\",width:\"28\",height:\"28\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",d:\"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 010 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a3 3 0 010-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375z\"})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-white font-bold text-lg mb-2\",children:\"No bookings yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm mb-6\",children:\"Rent, buy, or book a theater seat to get started\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"btn-red inline-block text-white px-8 py-3 rounded-xl font-bold text-sm\",children:\"Browse Movies\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:shown.map((b,i)=>b.type==='STREAMING'?/*#__PURE__*/_jsx(StreamingCard,{b:b,i:i},b.id||b.bookingNumber):/*#__PURE__*/_jsx(TheaterCard,{b:b,i:i,onCancel:handleCancel},b.id||b.bookingNumber))})]});};export default DefaultlayoutHoc(BookingsPage);","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Link","DefaultlayoutHoc","bookingAPI","IMG_W500","useAuth","Loader","jsx","_jsx","jsxs","_jsxs","loadLocalBookings","user","JSON","parse","localStorage","getItem","concat","id","email","_unused","fmtDate","dt","Date","toLocaleDateString","day","month","year","hour","minute","_unused2","STATUS_STYLE","CONFIRMED","bg","text","border","CANCELLED","PENDING","Badge","_ref","label","color","className","style","background","children","StreamingCard","_ref2","_b$show","b","i","st","status","movie","show","src","posterUrl","startsWith","animationDelay","borderBottom","bookingNumber","purchaseType","alt","title","onError","e","target","display","viewBox","fill","stroke","strokeWidth","width","height","d","genre","language","filter","Boolean","join","bookingTime","totalAmount","TheaterCard","_ref3","_b$show2","_b$show3","_b$show3$screen","_b$show3$screen$theat","_b$show4","_b$show4$screen","_b$show5","_b$seats","_b$seats2","_b$totalAmount","onCancel","screen","theater","name","startTime","seats","slice","map","s","_s$seat","seat","seatNumber","length","toFixed","onClick","BookingsPage","navigate","bookings","setBookings","loading","setLoading","tab","setTab","error","setError","local","fetchAPI","Error","res","getByUser","api","data","localNums","Set","has","_unused3","handleCancel","window","confirm","cancel","_unused4","key","saved","setItem","stringify","x","_objectSpread","_unused5","p","streaming","type","shown","t","boxShadow","strokeLinecap","to"],"sources":["C:/Users/divya/Downloads/Movie Booking Frontend/Frontend/src/pages/BookingsPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { DefaultlayoutHoc } from '../layout/DefaultLayout';\nimport { bookingAPI, IMG_W500 } from '../services/api';\nimport { useAuth } from '../context/AuthContext';\nimport Loader from '../components/Loader/Loader';\n\n/* ── Helpers ──────────────────────────────────────────────────────────── */\nconst loadLocalBookings = (user) => {\n  if (!user) return [];\n  try {\n    return JSON.parse(localStorage.getItem(`bms_bookings_${user.id || user.email}`) || '[]');\n  } catch { return []; }\n};\n\nconst fmtDate = dt => {\n  try {\n    return new Date(dt).toLocaleDateString('en-IN', {\n      day: 'numeric', month: 'short', year: 'numeric',\n      hour: '2-digit', minute: '2-digit',\n    });\n  } catch { return dt || ''; }\n};\n\nconst STATUS_STYLE = {\n  CONFIRMED: { bg: 'rgba(34,197,94,0.1)',  text: '#4ade80', border: 'rgba(34,197,94,0.2)'  },\n  CANCELLED: { bg: 'rgba(239,68,68,0.1)',  text: '#f87171', border: 'rgba(239,68,68,0.2)'  },\n  PENDING:   { bg: 'rgba(234,179,8,0.1)',  text: '#fbbf24', border: 'rgba(234,179,8,0.2)'  },\n};\n\nconst Badge = ({ label, bg, color, border }) => (\n  <span className=\"text-xs font-bold px-2.5 py-1 rounded-full\"\n    style={{ background: bg, color, border: `1px solid ${border}` }}>\n    {label}\n  </span>\n);\n\n/* ── Streaming card ───────────────────────────────────────────────────── */\nconst StreamingCard = ({ b, i }) => {\n  const st    = STATUS_STYLE[b.status] || STATUS_STYLE.CONFIRMED;\n  const movie = b.show?.movie || {};\n  const src   = movie.posterUrl\n    ? (movie.posterUrl.startsWith('http') ? movie.posterUrl : `${IMG_W500}${movie.posterUrl}`)\n    : null;\n\n  return (\n    <div className=\"rounded-2xl overflow-hidden animate-fade-up\"\n      style={{ background: '#14152b', border: '1px solid rgba(255,255,255,0.05)', animationDelay: `${i * 0.05}s` }}>\n\n      <div className=\"px-5 py-3 flex items-center justify-between\"\n        style={{ borderBottom: '1px solid rgba(255,255,255,0.05)', background: 'rgba(255,255,255,0.02)' }}>\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-xs font-bold px-2 py-0.5 rounded-full\"\n            style={{ background: 'rgba(99,102,241,0.15)', color: '#818cf8', border: '1px solid rgba(99,102,241,0.25)' }}>\n            STREAMING\n          </span>\n          <span className=\"text-gray-600 text-xs font-mono\">{b.bookingNumber}</span>\n        </div>\n        <Badge\n          label={b.purchaseType === 'RENT' ? 'Rented · 48hr' : 'Purchased · Lifetime'}\n          bg={b.purchaseType === 'RENT' ? 'rgba(59,130,246,0.1)' : 'rgba(139,92,246,0.1)'}\n          color={b.purchaseType === 'RENT' ? '#93c5fd' : '#c4b5fd'}\n          border={b.purchaseType === 'RENT' ? 'rgba(59,130,246,0.2)' : 'rgba(139,92,246,0.2)'}\n        />\n      </div>\n\n      <div className=\"p-5 flex gap-4\">\n        {src\n          ? <img src={src} alt={movie.title} className=\"w-14 h-20 rounded-xl object-cover shrink-0\" onError={e => { e.target.style.display = 'none'; }} />\n          : (\n            <div className=\"w-14 h-20 rounded-xl shrink-0 flex items-center justify-center\"\n              style={{ background: 'rgba(99,102,241,0.12)', border: '1px solid rgba(99,102,241,0.2)' }}>\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#818cf8\" strokeWidth=\"1.5\" width=\"22\" height=\"22\">\n                <path d=\"M15 10l4.553-2.069A1 1 0 0121 8.87v6.26a1 1 0 01-1.447.894L15 14M3 8a2 2 0 012-2h10a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2V8z\"/>\n              </svg>\n            </div>\n          )\n        }\n        <div className=\"flex-1 min-w-0\">\n          <h3 className=\"text-white font-bold text-sm mb-1 truncate\">{movie.title || 'Unknown'}</h3>\n          <p className=\"text-gray-600 text-xs mb-3\">\n            {[movie.genre, movie.language].filter(Boolean).join(' · ')}\n          </p>\n          <p className=\"text-gray-700 text-xs\">{fmtDate(b.bookingTime)}</p>\n        </div>\n        <div className=\"flex flex-col items-end justify-between shrink-0\">\n          <p className=\"text-white font-black text-xl\">&#8377;{b.totalAmount}</p>\n          <Badge label={b.status} bg={st.bg} color={st.text} border={st.border} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\n/* ── Theater booking card ─────────────────────────────────────────────── */\nconst TheaterCard = ({ b, i, onCancel }) => {\n  const st    = STATUS_STYLE[b.status] || STATUS_STYLE.PENDING;\n  const movie = b.show?.movie || {};\n  const src   = movie.posterUrl\n    ? (movie.posterUrl.startsWith('http') ? movie.posterUrl : `${IMG_W500}${movie.posterUrl}`)\n    : null;\n\n  return (\n    <div className=\"rounded-2xl overflow-hidden animate-fade-up\"\n      style={{ background: '#14152b', border: '1px solid rgba(255,255,255,0.05)', animationDelay: `${i * 0.05}s` }}>\n\n      <div className=\"px-5 py-3 flex items-center justify-between\"\n        style={{ borderBottom: '1px solid rgba(255,255,255,0.05)', background: 'rgba(255,255,255,0.02)' }}>\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-xs font-bold px-2 py-0.5 rounded-full\"\n            style={{ background: 'rgba(229,25,55,0.12)', color: '#fca5a5', border: '1px solid rgba(229,25,55,0.2)' }}>\n            THEATER\n          </span>\n          <span className=\"text-gray-600 text-xs font-mono truncate max-w-xs\">{b.bookingNumber}</span>\n        </div>\n        <Badge label={b.status} bg={st.bg} color={st.text} border={st.border} />\n      </div>\n\n      <div className=\"p-5 flex gap-4\">\n        {src && (\n          <img src={src} alt={movie.title} className=\"w-14 h-20 rounded-xl object-cover shrink-0\"\n            onError={e => { e.target.style.display = 'none'; }} />\n        )}\n        <div className=\"flex-1 min-w-0\">\n          <h3 className=\"text-white font-bold text-sm mb-1 truncate\">{movie.title || 'Unknown'}</h3>\n          <p className=\"text-gray-500 text-xs mb-0.5\">\n            {[b.show?.screen?.theater?.name, b.show?.screen?.name].filter(Boolean).join(' · ')}\n          </p>\n          <p className=\"text-gray-600 text-xs mb-3\">{fmtDate(b.show?.startTime)}</p>\n          <div className=\"flex flex-wrap gap-1\">\n            {b.seats?.slice(0, 6).map(s => (\n              <span key={s.id} className=\"text-xs px-2 py-0.5 rounded-md font-mono\"\n                style={{ background: 'rgba(255,255,255,0.05)', color: '#6b7280', border: '1px solid rgba(255,255,255,0.07)' }}>\n                {s.seat?.seatNumber}\n              </span>\n            ))}\n            {b.seats?.length > 6 && <span className=\"text-xs text-gray-600\">+{b.seats.length - 6}</span>}\n          </div>\n        </div>\n        <div className=\"flex flex-col items-end justify-between shrink-0 gap-2\">\n          <p className=\"text-white font-black text-xl\">&#8377;{b.totalAmount?.toFixed(0)}</p>\n          <div className=\"flex flex-col items-end gap-1.5\">\n            <p className=\"text-gray-700 text-xs\">{fmtDate(b.bookingTime)}</p>\n            {b.status === 'CONFIRMED' && (\n              <button onClick={() => onCancel(b)}\n                className=\"text-xs font-semibold px-3 py-1.5 rounded-lg\"\n                style={{ color: '#f87171', background: 'rgba(239,68,68,0.08)', border: '1px solid rgba(239,68,68,0.2)' }}>\n                Cancel\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n/* ── Main Page ────────────────────────────────────────────────────────── */\nconst BookingsPage = () => {\n  const { user }   = useAuth();\n  const navigate   = useNavigate();\n  const [bookings, setBookings] = useState([]);\n  const [loading,  setLoading]  = useState(true);\n  const [tab,      setTab]      = useState('all');\n  const [error,    setError]    = useState('');\n\n  useEffect(() => {\n    if (!user) { navigate('/'); return; }\n\n    // Load local streaming bookings immediately (instant)\n    const local = loadLocalBookings(user);\n    setBookings(local);\n\n    // Then fetch theater bookings from backend\n    const fetchAPI = async () => {\n      try {\n        if (!user.id) throw new Error('no id');\n        const res = await bookingAPI.getByUser(user.id);\n        const api = res.data || [];\n        // Merge: local first (newest), then API (deduplicated)\n        const localNums = new Set(local.map(b => b.bookingNumber));\n        setBookings([...local, ...api.filter(b => !localNums.has(b.bookingNumber))]);\n      } catch {\n        if (!local.length) setError('Backend offline — no theater bookings to show.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchAPI();\n  }, [user, navigate]);\n\n  const handleCancel = async (b) => {\n    if (!window.confirm('Cancel this booking?')) return;\n    try {\n      if (b.id && typeof b.id === 'number') await bookingAPI.cancel(b.id);\n    } catch {}\n    // Update localStorage for streaming bookings\n    const key = `bms_bookings_${user.id || user.email}`;\n    try {\n      const saved = JSON.parse(localStorage.getItem(key) || '[]');\n      localStorage.setItem(key, JSON.stringify(\n        saved.map(x => x.bookingNumber === b.bookingNumber ? { ...x, status: 'CANCELLED' } : x)\n      ));\n    } catch {}\n    setBookings(p => p.map(x => x.bookingNumber === b.bookingNumber ? { ...x, status: 'CANCELLED' } : x));\n  };\n\n  const streaming = bookings.filter(b => b.type === 'STREAMING');\n  const theater   = bookings.filter(b => b.type !== 'STREAMING');\n  const shown     = tab === 'all' ? bookings : tab === 'streaming' ? streaming : theater;\n\n  if (loading && bookings.length === 0) return <Loader />;\n\n  return (\n    <div className=\"container mx-auto px-4 py-10 max-w-4xl animate-fade-up\">\n\n      {/* Header */}\n      <div className=\"flex items-center gap-3 mb-6\">\n        <div className=\"w-1 h-8 rounded-full\" style={{ background: '#e51937' }} />\n        <h1 className=\"text-white text-2xl font-black\">My Bookings</h1>\n        {bookings.length > 0 && (\n          <span className=\"text-xs font-bold px-2.5 py-1 rounded-full\"\n            style={{ background: 'rgba(229,25,55,0.12)', color: '#fca5a5', border: '1px solid rgba(229,25,55,0.2)' }}>\n            {bookings.length}\n          </span>\n        )}\n      </div>\n\n      {/* Error */}\n      {error && (\n        <div className=\"rounded-xl px-4 py-3 mb-5 text-sm text-yellow-300 flex gap-2\"\n          style={{ background: 'rgba(234,179,8,0.08)', border: '1px solid rgba(234,179,8,0.2)' }}>\n          ⚠ {error}\n        </div>\n      )}\n\n      {/* Tabs */}\n      {bookings.length > 0 && (\n        <div className=\"flex gap-1.5 p-1 rounded-xl mb-6 w-fit\"\n          style={{ background: 'rgba(255,255,255,0.04)', border: '1px solid rgba(255,255,255,0.06)' }}>\n          {[\n            { key: 'all',       label: `All (${bookings.length})` },\n            { key: 'theater',   label: `Theater (${theater.length})` },\n            { key: 'streaming', label: `Streaming (${streaming.length})` },\n          ].map(t => (\n            <button key={t.key} onClick={() => setTab(t.key)}\n              className=\"px-4 py-2 rounded-lg text-xs font-bold transition-all\"\n              style={tab === t.key\n                ? { background: '#e51937', color: '#fff', boxShadow: '0 2px 12px rgba(229,25,55,0.35)' }\n                : { color: '#6b7280' }}>\n              {t.label}\n            </button>\n          ))}\n        </div>\n      )}\n\n      {/* Empty state */}\n      {!loading && shown.length === 0 && (\n        <div className=\"text-center py-20 rounded-2xl\"\n          style={{ background: '#14152b', border: '1px solid rgba(255,255,255,0.04)' }}>\n          <div className=\"w-16 h-16 rounded-2xl mx-auto mb-4 flex items-center justify-center\"\n            style={{ background: 'rgba(229,25,55,0.08)', border: '1px solid rgba(229,25,55,0.15)' }}>\n            <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#e51937\" strokeWidth=\"1.5\" width=\"28\" height=\"28\">\n              <path strokeLinecap=\"round\" d=\"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 010 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a3 3 0 010-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375z\"/>\n            </svg>\n          </div>\n          <h3 className=\"text-white font-bold text-lg mb-2\">No bookings yet</h3>\n          <p className=\"text-gray-600 text-sm mb-6\">Rent, buy, or book a theater seat to get started</p>\n          <Link to=\"/\" className=\"btn-red inline-block text-white px-8 py-3 rounded-xl font-bold text-sm\">\n            Browse Movies\n          </Link>\n        </div>\n      )}\n\n      {/* Cards */}\n      <div className=\"space-y-4\">\n        {shown.map((b, i) =>\n          b.type === 'STREAMING'\n            ? <StreamingCard key={b.id || b.bookingNumber} b={b} i={i} />\n            : <TheaterCard   key={b.id || b.bookingNumber} b={b} i={i} onCancel={handleCancel} />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default DefaultlayoutHoc(BookingsPage);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}