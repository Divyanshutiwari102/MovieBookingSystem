{"ast":null,"code":"import _objectSpread from\"C:/Users/divya/Downloads/Movie Booking Frontend/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{useSearchParams,Link}from'react-router-dom';import{DefaultlayoutHoc}from'../layout/DefaultLayout';import{movieAPI,tmdbAPI,IMG_W500}from'../services/api';import{DEMO_MOVIES}from'../services/demoData';import Loader from'../components/Loader/Loader';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SearchPage=()=>{const[params]=useSearchParams();const query=params.get('q')||'';const[results,setResults]=useState([]);const[loading,setLoading]=useState(false);const[searched,setSearched]=useState(false);useEffect(()=>{if(!query.trim()){setResults([]);setSearched(false);return;}setLoading(true);setSearched(true);const run=async()=>{// 1. Backend search\ntry{var _res$data;const res=await movieAPI.search(query);if(((_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.length)>0){setResults(res.data);return;}}catch(_unused){}// 2. TMDB\nif(process.env.REACT_APP_TMDB_KEY){try{var _res$data2,_res$data2$results;const res=await tmdbAPI.search(query);if(((_res$data2=res.data)===null||_res$data2===void 0?void 0:(_res$data2$results=_res$data2.results)===null||_res$data2$results===void 0?void 0:_res$data2$results.length)>0){setResults(res.data.results.map(m=>_objectSpread(_objectSpread({},m),{},{title:m.title||m.original_title,posterUrl:m.poster_path})));return;}}catch(_unused2){}}// 3. Demo filter\nconst q=query.toLowerCase();setResults(DEMO_MOVIES.filter(m=>m.title.toLowerCase().includes(q)||m.genre.toLowerCase().includes(q)||m.language.toLowerCase().includes(q)));};run().finally(()=>setLoading(false));},[query]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 md:px-10 py-10 max-w-screen-xl\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-white text-2xl font-black mb-1\",children:query?\"Search results for \\\"\".concat(query,\"\\\"\"):'Search Movies'}),searched&&!loading&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 text-sm mb-8\",children:[results.length,\" result\",results.length!==1?'s':'',\" found\"]}),loading&&/*#__PURE__*/_jsx(Loader,{}),!loading&&searched&&results.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-20 animate-scale-in\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl mb-4\",style:{filter:'grayscale(1) opacity(0.5)'},children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-white text-xl font-bold mb-2\",children:\"No results found\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 text-sm mb-6\",children:[\"No movies found for \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-red-400\",children:[\"\\\"\",query,\"\\\"\"]})]}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"btn-red inline-block text-white px-8 py-3 rounded-xl font-bold text-sm\",children:\"Browse All Movies\"})]}),!loading&&results.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 animate-fade-up\",children:results.map((m,i)=>{const src=m.posterUrl?m.posterUrl.startsWith('http')?m.posterUrl:\"\".concat(IMG_W500).concat(m.posterUrl):m.poster_path?\"\".concat(IMG_W500).concat(m.poster_path):null;return/*#__PURE__*/_jsxs(Link,{to:\"/movie/\".concat(m.id),className:\"movie-card block rounded-xl overflow-hidden\",style:{background:'#14152b',border:'1px solid rgba(255,255,255,0.05)',animationDelay:\"\".concat(i*0.04,\"s\")},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative overflow-hidden\",style:{paddingBottom:'150%'},children:[src?/*#__PURE__*/_jsx(\"img\",{src:src,alt:m.title,className:\"absolute inset-0 w-full h-full object-cover\",onError:e=>{var _m$title;e.target.src=\"https://placehold.co/200x300/14152b/e51937?text=\".concat(encodeURIComponent(((_m$title=m.title)===null||_m$title===void 0?void 0:_m$title.slice(0,10))||'?'));}}):/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center\",style:{background:'#1a1b2e'},children:/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 text-4xl\",children:\"\\uD83C\\uDFAC\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-overlay absolute inset-0 flex items-end p-3 opacity-0 transition-opacity duration-300\",style:{background:'linear-gradient(to top, rgba(229,25,55,0.85), transparent)'},children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white text-xs font-bold\",children:\"Book Now\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-2.5 pb-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-white text-xs font-semibold line-clamp-2 leading-tight mb-1\",children:m.title}),m.genre&&/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-xs truncate\",children:m.genre})]})]},m.id||i);})})]});};export default DefaultlayoutHoc(SearchPage);","map":{"version":3,"names":["React","useEffect","useState","useSearchParams","Link","DefaultlayoutHoc","movieAPI","tmdbAPI","IMG_W500","DEMO_MOVIES","Loader","jsx","_jsx","jsxs","_jsxs","SearchPage","params","query","get","results","setResults","loading","setLoading","searched","setSearched","trim","run","_res$data","res","search","data","length","_unused","process","env","REACT_APP_TMDB_KEY","_res$data2","_res$data2$results","map","m","_objectSpread","title","original_title","posterUrl","poster_path","_unused2","q","toLowerCase","filter","includes","genre","language","finally","className","children","concat","style","to","i","src","startsWith","id","background","border","animationDelay","paddingBottom","alt","onError","e","_m$title","target","encodeURIComponent","slice"],"sources":["C:/Users/divya/Downloads/Movie Booking Frontend/Frontend/src/pages/SearchPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSearchParams, Link } from 'react-router-dom';\nimport { DefaultlayoutHoc } from '../layout/DefaultLayout';\nimport { movieAPI, tmdbAPI, IMG_W500 } from '../services/api';\nimport { DEMO_MOVIES } from '../services/demoData';\nimport Loader from '../components/Loader/Loader';\n\nconst SearchPage = () => {\n  const [params] = useSearchParams();\n  const query = params.get('q') || '';\n  const [results, setResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [searched, setSearched] = useState(false);\n\n  useEffect(() => {\n    if (!query.trim()) { setResults([]); setSearched(false); return; }\n    setLoading(true);\n    setSearched(true);\n\n    const run = async () => {\n      // 1. Backend search\n      try {\n        const res = await movieAPI.search(query);\n        if (res.data?.length > 0) { setResults(res.data); return; }\n      } catch {}\n\n      // 2. TMDB\n      if (process.env.REACT_APP_TMDB_KEY) {\n        try {\n          const res = await tmdbAPI.search(query);\n          if (res.data?.results?.length > 0) {\n            setResults(res.data.results.map(m => ({ ...m, title: m.title || m.original_title, posterUrl: m.poster_path })));\n            return;\n          }\n        } catch {}\n      }\n\n      // 3. Demo filter\n      const q = query.toLowerCase();\n      setResults(DEMO_MOVIES.filter(m =>\n        m.title.toLowerCase().includes(q) ||\n        m.genre.toLowerCase().includes(q) ||\n        m.language.toLowerCase().includes(q)\n      ));\n    };\n\n    run().finally(() => setLoading(false));\n  }, [query]);\n\n  return (\n    <div className=\"container mx-auto px-4 md:px-10 py-10 max-w-screen-xl\">\n      <h1 className=\"text-white text-2xl font-black mb-1\">\n        {query ? `Search results for \"${query}\"` : 'Search Movies'}\n      </h1>\n      {searched && !loading && (\n        <p className=\"text-gray-500 text-sm mb-8\">{results.length} result{results.length !== 1 ? 's' : ''} found</p>\n      )}\n\n      {loading && <Loader />}\n\n      {!loading && searched && results.length === 0 && (\n        <div className=\"text-center py-20 animate-scale-in\">\n          <div className=\"text-6xl mb-4\" style={{ filter: 'grayscale(1) opacity(0.5)' }}>üîç</div>\n          <h3 className=\"text-white text-xl font-bold mb-2\">No results found</h3>\n          <p className=\"text-gray-500 text-sm mb-6\">\n            No movies found for <span className=\"text-red-400\">\"{query}\"</span>\n          </p>\n          <Link to=\"/\" className=\"btn-red inline-block text-white px-8 py-3 rounded-xl font-bold text-sm\">\n            Browse All Movies\n          </Link>\n        </div>\n      )}\n\n      {!loading && results.length > 0 && (\n        <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 animate-fade-up\">\n          {results.map((m, i) => {\n            const src = m.posterUrl\n              ? (m.posterUrl.startsWith('http') ? m.posterUrl : `${IMG_W500}${m.posterUrl}`)\n              : m.poster_path ? `${IMG_W500}${m.poster_path}` : null;\n            return (\n              <Link key={m.id || i} to={`/movie/${m.id}`}\n                className=\"movie-card block rounded-xl overflow-hidden\"\n                style={{ background: '#14152b', border: '1px solid rgba(255,255,255,0.05)', animationDelay: `${i * 0.04}s` }}>\n                <div className=\"relative overflow-hidden\" style={{ paddingBottom: '150%' }}>\n                  {src\n                    ? <img src={src} alt={m.title} className=\"absolute inset-0 w-full h-full object-cover\"\n                        onError={e => { e.target.src = `https://placehold.co/200x300/14152b/e51937?text=${encodeURIComponent(m.title?.slice(0,10) || '?')}`; }} />\n                    : <div className=\"absolute inset-0 flex items-center justify-center\" style={{ background: '#1a1b2e' }}>\n                        <span className=\"text-gray-600 text-4xl\">üé¨</span>\n                      </div>\n                  }\n                  <div className=\"card-overlay absolute inset-0 flex items-end p-3 opacity-0 transition-opacity duration-300\"\n                    style={{ background: 'linear-gradient(to top, rgba(229,25,55,0.85), transparent)' }}>\n                    <span className=\"text-white text-xs font-bold\">Book Now</span>\n                  </div>\n                </div>\n                <div className=\"p-2.5 pb-3\">\n                  <p className=\"text-white text-xs font-semibold line-clamp-2 leading-tight mb-1\">{m.title}</p>\n                  {m.genre && <p className=\"text-gray-600 text-xs truncate\">{m.genre}</p>}\n                </div>\n              </Link>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default DefaultlayoutHoc(SearchPage);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}